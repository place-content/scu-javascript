<!DOCTYPE html>
<html lang="ko">
<head>
    <!--
        TaskFlow 프론트엔드 메인 HTML 파일

        이 파일은 TaskFlow 웹 애플리케이션의 프론트엔드입니다.
        Vanilla JavaScript를 사용하여 단순한 CRUD 기능을 구현합니다.

        주요 기능:
        - 회원가입 및 로그인 기능
        - 할 일 CRUD (생성, 읽기, 수정, 삭제)
        - 반응형 웹 디자인
        - 로컬 스토리지를 활용한 데이터 관리
        - RESTful API 통신
    -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TaskFlow - 간단한 개인 업무 관리 도구">
    <title>TaskFlow - 개인 업무 관리</title>

    <!-- Bootstrap CSS (UI 프레임워크) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Google Fonts (Noto Sans KR) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- 커스텀 CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!--
        메인 애플리케이션 컨테이너
        로그인 여부에 따라 다른 화면을 표시합니다
    -->
    <div id="app">
        <!-- 로딩 화면 -->
        <div id="loadingScreen" class="loading-screen">
            <div class="loading-content">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">로딩 중...</span>
                </div>
                <h4 class="mt-3">TaskFlow</h4>
                <p class="text-muted">로딩 중입니다...</p>
            </div>
        </div>

        <!-- 로그인 화면 -->
        <div id="loginScreen" class="auth-screen" style="display: none;">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="auth-card">
                            <div class="text-center mb-4">
                                <h2 class="app-title">
                                    <i class="bi bi-check2-square"></i>
                                    TaskFlow
                                </h2>
                                <p class="text-muted">간단한 개인 업무 관리</p>
                            </div>

                            <!-- 로그인 폼 -->
                            <form id="loginForm">
                                <h3 class="text-center mb-4">로그인</h3>

                                <div class="mb-3">
                                    <label for="loginEmail" class="form-label">이메일</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="bi bi-envelope"></i>
                                        </span>
                                        <input type="email" class="form-control" id="loginEmail"
                                               placeholder="이메일을 입력하세요" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="loginPassword" class="form-label">비밀번호</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="bi bi-lock"></i>
                                        </span>
                                        <input type="password" class="form-control" id="loginPassword"
                                               placeholder="비밀번호를 입력하세요" required>
                                    </div>
                                </div>

                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-box-arrow-in-right"></i>
                                        로그인
                                    </button>
                                </div>

                                <div class="text-center mt-3">
                                    <button type="button" class="btn btn-link" id="showRegisterBtn">
                                        계정이 없으신가요? 회원가입
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 회원가입 화면 -->
        <div id="registerScreen" class="auth-screen" style="display: none;">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6 col-lg-4">
                        <div class="auth-card">
                            <div class="text-center mb-4">
                                <h2 class="app-title">
                                    <i class="bi bi-check2-square"></i>
                                    TaskFlow
                                </h2>
                                <p class="text-muted">간단한 개인 업무 관리</p>
                            </div>

                            <!-- 회원가입 폼 -->
                            <form id="registerForm">
                                <h3 class="text-center mb-4">회원가입</h3>

                                <div class="mb-3">
                                    <label for="registerName" class="form-label">이름</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="bi bi-person"></i>
                                        </span>
                                        <input type="text" class="form-control" id="registerName"
                                               placeholder="이름을 입력하세요" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="registerEmail" class="form-label">이메일</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="bi bi-envelope"></i>
                                        </span>
                                        <input type="email" class="form-control" id="registerEmail"
                                               placeholder="이메일을 입력하세요" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="registerPassword" class="form-label">비밀번호</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="bi bi-lock"></i>
                                        </span>
                                        <input type="password" class="form-control" id="registerPassword"
                                               placeholder="최소 6자 이상" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="confirmPassword" class="form-label">비밀번호 확인</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="bi bi-lock-fill"></i>
                                        </span>
                                        <input type="password" class="form-control" id="confirmPassword"
                                               placeholder="비밀번호를 다시 입력하세요" required>
                                    </div>
                                </div>

                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-person-plus"></i>
                                        회원가입
                                    </button>
                                </div>

                                <div class="text-center mt-3">
                                    <button type="button" class="btn btn-link" id="showLoginBtn">
                                        이미 계정이 있으신가요? 로그인
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 메인 앱 화면 (할 일 관리) -->
        <div id="mainScreen" style="display: none;">
            <!-- 상단 네비게이션 바 -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
                <div class="container">
                    <a class="navbar-brand" href="#">
                        <i class="bi bi-check2-square"></i>
                        TaskFlow
                    </a>

                    <div class="navbar-nav ms-auto">
                        <div class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button"
                               data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-person-circle"></i>
                                <span id="userName">사용자</span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">
                                    <i class="bi bi-person"></i> 내 정보
                                </a></li>
                                <li><a class="dropdown-item" href="#">
                                    <i class="bi bi-gear"></i> 설정
                                </a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" id="logoutBtn">
                                    <i class="bi bi-box-arrow-right"></i> 로그아웃
                                </a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- 메인 컨텐츠 -->
            <div class="container mt-4">
                <!-- 통계 카드 -->
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="card bg-info text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h5 class="card-title">전체 할 일</h5>
                                        <h2 id="totalTasks">0</h2>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="bi bi-list-task fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-success text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h5 class="card-title">완료된 할 일</h5>
                                        <h2 id="completedTasks">0</h2>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="bi bi-check-circle fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card bg-warning text-white">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h5 class="card-title">진행률</h5>
                                        <h2 id="completionRate">0%</h2>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="bi bi-percent fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 할 일 추가 및 필터 -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="bi bi-plus-circle"></i> 새 할 일 추가
                                </h5>
                                <form id="addTaskForm">
                                    <div class="mb-3">
                                        <input type="text" class="form-control" id="taskTitle"
                                               placeholder="할 일을 입력하세요..." required>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-2">
                                            <select class="form-select" id="taskCategory">
                                                <option value="개인">개인</option>
                                                <option value="업무">업무</option>
                                                <option value="학습">학습</option>
                                                <option value="건강">건강</option>
                                                <option value="쇼핑">쇼핑</option>
                                                <option value="기타">기타</option>
                                            </select>
                                        </div>
                                        <div class="col-md-6 mb-2">
                                            <select class="form-select" id="taskPriority">
                                                <option value="3">보통</option>
                                                <option value="1">낮음</option>
                                                <option value="2">조금 낮음</option>
                                                <option value="4">높음</option>
                                                <option value="5">매우 높음</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <input type="date" class="form-control" id="taskDueDate">
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="bi bi-plus-lg"></i> 할 일 추가
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="bi bi-funnel"></i> 필터 및 정렬
                                </h5>
                                <div class="mb-3">
                                    <select class="form-select" id="filterCategory">
                                        <option value="">모든 카테고리</option>
                                        <option value="개인">개인</option>
                                        <option value="업무">업무</option>
                                        <option value="학습">학습</option>
                                        <option value="건강">건강</option>
                                        <option value="쇼핑">쇼핑</option>
                                        <option value="기타">기타</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <select class="form-select" id="filterStatus">
                                        <option value="">모든 상태</option>
                                        <option value="false">진행 중</option>
                                        <option value="true">완료됨</option>
                                    </select>
                                </div>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-secondary" id="clearCompletedBtn">
                                        <i class="bi bi-trash"></i> 완료된 항목 삭제
                                    </button>
                                    <button type="button" class="btn btn-outline-info" id="refreshBtn">
                                        <i class="bi bi-arrow-clockwise"></i> 새로고침
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 할 일 목록 -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="bi bi-list-check"></i> 할 일 목록
                                </h5>
                                <div id="taskList">
                                    <!-- 할 일 목록이 여기에 동적으로 추가됩니다 -->
                                    <div class="text-center py-5 text-muted">
                                        <i class="bi bi-inbox fa-3x"></i>
                                        <p class="mt-3">할 일이 없습니다. 새 할 일을 추가해보세요!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 할 일 수정 모달 -->
    <div class="modal fade" id="editTaskModal" tabindex="-1" aria-labelledby="editTaskModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editTaskModalLabel">
                        <i class="bi bi-pencil-square"></i> 할 일 수정
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editTaskForm">
                        <input type="hidden" id="editTaskId">

                        <div class="mb-3">
                            <label for="editTaskTitle" class="form-label">제목</label>
                            <input type="text" class="form-control" id="editTaskTitle" required>
                        </div>

                        <div class="mb-3">
                            <label for="editTaskDescription" class="form-label">설명</label>
                            <textarea class="form-control" id="editTaskDescription" rows="3"></textarea>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="editTaskCategory" class="form-label">카테고리</label>
                                <select class="form-select" id="editTaskCategory">
                                    <option value="개인">개인</option>
                                    <option value="업무">업무</option>
                                    <option value="학습">학습</option>
                                    <option value="건강">건강</option>
                                    <option value="쇼핑">쇼핑</option>
                                    <option value="기타">기타</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="editTaskPriority" class="form-label">우선순위</label>
                                <select class="form-select" id="editTaskPriority">
                                    <option value="1">낮음</option>
                                    <option value="2">조금 낮음</option>
                                    <option value="3">보통</option>
                                    <option value="4">높음</option>
                                    <option value="5">매우 높음</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="editTaskDueDate" class="form-label">마감일</label>
                            <input type="date" class="form-control" id="editTaskDueDate">
                        </div>

                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="editTaskCompleted">
                                <label class="form-check-label" for="editTaskCompleted">
                                    완료됨
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
                    <button type="button" class="btn btn-danger" id="deleteTaskBtn">
                        <i class="bi bi-trash"></i> 삭제
                    </button>
                    <button type="button" class="btn btn-primary" id="saveTaskBtn">
                        <i class="bi bi-check-lg"></i> 저장
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 알림 토스트 -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="notificationToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <i class="bi bi-info-circle-fill text-primary me-2"></i>
                <strong class="me-auto" id="toastTitle">알림</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                메시지가 여기에 표시됩니다.
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 커스텀 JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>